server:
  port: 8888

spring:
  application:
    name: api-gateway
  cloud:
    nacos:
      discovery:
        server-addr: 192.168.31.50:10001,192.168.31.50:10002,192.168.31.50:10003
    gateway:
      discovery:
        locator:
          enabled: true
      routes:
        - id: customer-service
          uri: lb://customer-service
          predicates:
            - Path=/api/customer/**
          filters:
            - StripPrefix=0   # /api/customer/xxx -> /xxx
        - id: finance-service
          uri: lb://finance-service
          predicates:
            - Path=/api/finance/**
          filters:
            - StripPrefix=0
      globalcors:
        cors-configurations:
          '[/**]':
            allowed-origins:
              - "http://localhost:8081"  # Vue前端地址
            allowed-methods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
              - PATCH
            allowed-headers: "*"
            allow-credentials: true
            exposed-headers:
              - "Authorization"
              - "X-Request-Id"
              - "X-User-Id"
            max-age: 3600
    loadbalancer:
      retry:
        enabled: true
# JWT配置
jwt:
  secret: "qXwZ7P2rL+9sV6bT5yN8mW4cK1jH3dF0gE5aB7vR2tY6uI9oP3qA8zX1wC4n7"
  expiration: 86400000  # 24小时（单位：毫秒）
  issuer: "customer-service"
  header: "Authorization"
  prefix: "Bearer "
# application.yml 白名单配置
security:
  whitelist:
    enabled: true
    paths:
      - /api/customer/user/login
      - /api/customer/user/register
    patterns:
      - /public/.*
      - /static/.*
      - /download/.*\\.(jpg|png|pdf)$